{# store/templates/store/search_results.html #}
{% extends 'store/base.html' %}
{% load static %}
{% load i18n %}

{% block title %}
    {% if query %}'{{ query }}' –±–æ—é–Ω—á–∞ –∏–∑–¥”©”©{% else %}–ò–∑–¥”©”©{% endif %}
{% endblock %}

{% block content %}
    <h1>
        {% if query %}
            "{% blocktrans with query=query %} '{{ query }}' –±–æ—é–Ω—á–∞ –∏–∑–¥”©”© –Ω–∞—Ç—ã–π–∂–∞–ª–∞—Ä—ã {% endblocktrans %}"
        {% else %}
            {% trans "–ò–∑–¥”©”© –Ω–∞—Ç—ã–π–∂–∞–ª–∞—Ä—ã" %}
        {% endif %}
    </h1>

    {# –ë–∏–ª–¥–∏—Ä“Ø“Ø–ª”©—Ä–¥“Ø –∫”©—Ä—Å”©—Ç“Ø“Ø #}
    {% if messages %}
        <ul class="messages" style="list-style: none; padding: 0; margin-bottom: 15px;">
            {% for message in messages %}
                 <li{% if message.tags %} class="{{ message.tags }}" style="padding: 10px; border-radius: 5px; margin-bottom: 5px; color: white; background-color: {% if message.tags == 'success' %}#28a745{% elif message.tags == 'warning' %}#ffc107; color: black;{% elif message.tags == 'error' %}#dc3545{% else %}#17a2b8{% endif %};"{% endif %}>{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}

    {# –¢–∞–±—ã–ª–≥–∞–Ω —Ç–æ–≤–∞—Ä–ª–∞—Ä–¥—ã–Ω —Ç–∏–∑–º–µ—Å–∏ #}
    <section class="search-results-list">
        {% if results %}
            <div class="category-grid-glovo product-list-as-category"> {# –ö–∞—Ç–µ–≥–æ—Ä–∏—è –±–∞—Ä–∞–≥—ã–Ω–¥–∞–≥—ã–¥–∞–π —Å—Ç–∏–ª—å #}
                {% for product in results %}
                    <a href="{{ product.get_absolute_url }}" class="category-card-glovo product-card-like-category">
                          <div class="img-container product-image">
                              {% if product.image %}
                                  <img src="{{ product.image.url }}" alt="{{ product.name }}">
                              {% else %}
                                  <div class="placeholder-product">üõí</div>
                              {% endif %}
                              {% if product.discount_percent > 0 %}
                                  <span class="discount-badge-on-card">-{{ product.discount_percent }}%</span>
                              {% endif %}
                          </div>
                           <span class="name product-name">{{ product.name }}</span>
                           <span class="price product-price">
                               {% if product.discount_percent > 0 %}
                                   <span class="original-price">{{ product.price }} —Å–æ–º</span>
                               {% endif %}
                               {{ product.get_discounted_price }} —Å–æ–º
                               <span class="weight-unit"> / {{ product.weight_unit }}</span>
                           </span>
                     </a>
                {% endfor %}
            </div>
        {% elif query %} {# –≠–≥–µ—Ä –∏–∑–¥–µ–≥–µ–Ω —Å”©–∑ –±–∞—Ä, –±–∏—Ä–æ–∫ –Ω–∞—Ç—ã–π–∂–∞ –∂–æ–∫ –±–æ–ª—Å–æ #}
             {# –ë—É–ª –±–∏–ª–¥–∏—Ä“Ø“Ø messages –∞—Ä–∫—ã–ª—É—É –¥–µ–ª–µ —á—ã–≥–∞—Ç, –±–∏—Ä–æ–∫ –±—É–ª –∂–µ—Ä–¥–µ –¥–∞ –∫–∞–ª—Ç—ã—Ä—Å–∞ –±–æ–ª–æ—Ç #}
            {# <p>{% blocktrans with query=query %}–¢–∏–ª–µ–∫–∫–µ –∫–∞—Ä—à—ã, '{{ query }}' –±–æ—é–Ω—á–∞ —ç—á –Ω–µ—Ä—Å–µ —Ç–∞–±—ã–ª–≥–∞–Ω –∂–æ–∫.{% endblocktrans %}</p> #}
        {% endif %}
    </section>

    <div style="margin-top: 30px;">
        <a href="{% url 'store:home' %}">‚áê –ë–∞—à–∫—ã –±–µ—Ç–∫–µ –∫–∞–π—Ç—É—É</a>
    </div>

{% endblock %}