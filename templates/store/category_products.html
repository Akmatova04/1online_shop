{# store/templates/store/category_products.html #}
{% extends 'store/base.html' %} {# –ù–µ–≥–∏–∑–≥–∏ —à–∞–±–ª–æ–Ω–¥—É –º—É—Ä–∞—Å—Ç–∞–π–±—ã–∑ #}
{% load static %} {# –°—Ç–∞—Ç–∏–∫–∞–ª—ã–∫ —Ñ–∞–π–ª–¥–∞—Ä–¥—ã –∫–æ–ª–¥–æ–Ω—É—É “Ø—á“Ø–Ω #}

{# –ë–∞—Ä–∞–∫—Ç—ã–Ω –∞—Ç–∞–ª—ã—à—ã–Ω –∫–∞—Ç–µ–≥–æ—Ä–∏—è–Ω—ã–Ω –∞—Ç—ã –º–µ–Ω–µ–Ω –∫–æ—ë–±—É–∑ #}
{% block title %}{{ category.name }} - –¢–æ–≤–∞—Ä–ª–∞—Ä{% endblock %}

{% block content %}
    {# –ö–∞—Ç–µ–≥–æ—Ä–∏—è–Ω—ã–Ω –∞—Ç–∞–ª—ã—à—ã–Ω —á–æ“£ –∫—ã–ª—ã–ø –∫”©—Ä—Å”©—Ç”©–±“Ø–∑ #}
    <h1>{{ category.name }}</h1>

    {# –≠–≥–µ—Ä –∫–∞–∞–ª–∞—Å–∞“£—ã–∑, –∫–∞—Ç–µ–≥–æ—Ä–∏—è–Ω—ã–Ω —Å“Ø—Ä”©—Ç“Ø–Ω –¥–∞ –∫–æ—à–æ –∞–ª–∞—Å—ã–∑ #}
     {% if category.image %}
        <img src="{{ category.image.url }}" alt="{{ category.name }}" style="max-height: 150px; margin-bottom: 20px;">
    {% endif %} 

    {# –¢–æ–≤–∞—Ä–ª–∞—Ä–¥—ã–Ω —Ç–∏–∑–º–µ—Å–∏–Ω –∫”©—Ä—Å”©—Ç“Ø“Ø—á“Ø –±”©–ª“Ø–º #}
    <section class="category-products-list">
        {% if products %} {# –≠–≥–µ—Ä –±—É–ª –∫–∞—Ç–µ–≥–æ—Ä–∏—è–¥–∞ —Ç–æ–≤–∞—Ä–ª–∞—Ä –±–∞—Ä –±–æ–ª—Å–æ #}
            <h2>–ë—É–ª –∫–∞—Ç–µ–≥–æ—Ä–∏—è–¥–∞–≥—ã —Ç–æ–≤–∞—Ä–ª–∞—Ä:</h2>
            {# –ë–∞—à–∫—ã –±–µ—Ç—Ç–µ–≥–∏–¥–µ–π —ç–ª–µ —Ç–æ—Ä—á–æ (grid) —Å—Ç–∏–ª–∏–Ω –∫–æ–ª–¥–æ–Ω–æ–±—É–∑ #}
            <div class="category-grid-glovo product-list-as-category">
                {% for product in products %}
                    {# –ê—Ä –±–∏—Ä —Ç–æ–≤–∞—Ä “Ø—á“Ø–Ω –∫–∞—Ä—Ç–æ—á–∫–∞ (–±–∞—à–∫—ã –±–µ—Ç—Ç–µ–≥–∏–¥–µ–π) #}
                    {# ----- üëáüëáüëá –ë–£–õ –°–ê–¢–´–† –û“¢–î–û–õ–î–£ üëáüëáüëá ----- #}
                    <a href="{{ product.get_absolute_url }}" class="category-card-glovo product-card-like-category">
                    {# ----- üëÜüëÜüëÜ –ë—É–ª product.get_absolute_url() –∫–æ–ª–¥–æ–Ω–æ—Ç üëÜüëÜüëÜ ----- #}
                          <div class="img-container product-image">
                              {% if product.image %}
                                  <img src="{{ product.image.url }}" alt="{{ product.name }}">
                              {% else %}
                                  <div class="placeholder-product">üõí</div>
                              {% endif %}
                              {# –ê—Ä–∑–∞–Ω–¥–∞—Ç—É—É –±–µ–ª–≥–∏—Å–∏ (—ç–≥–µ—Ä –±–∞—Ä –±–æ–ª—Å–æ) #}
                              {% if product.discount_percent > 0 %}
                                  <span class="discount-badge-on-card">-{{ product.discount_percent }}%</span>
                              {% endif %}
                          </div>
                           <span class="name product-name">{{ product.name }}</span>
                           <span class="price product-price">
                               {# –≠—Å–∫–∏ –±–∞–∞ (—ç–≥–µ—Ä –∞—Ä–∑–∞–Ω–¥–∞—Ç—É—É –±–æ–ª—Å–æ) #}
                               {% if product.discount_percent > 0 %}
                                   <span class="original-price">{{ product.price }} —Å–æ–º</span>
                               {% endif %}
                               {# –ñ–∞“£—ã –∂–µ –Ω–µ–≥–∏–∑–≥–∏ –±–∞–∞ #}
                               {{ product.get_discounted_price }} —Å–æ–º
                               {# / –∫–≥ / –¥–∞–∞–Ω–∞ –∂.–±. –∫–æ—à—É—É #}
                               <span class="weight-unit"> / {{ product.weight_unit }}</span>
                           </span>
                     </a>
                {% endfor %}
            </div>
        {% else %} {# –≠–≥–µ—Ä –±—É–ª –∫–∞—Ç–µ–≥–æ—Ä–∏—è–¥–∞ —Ç–æ–≤–∞—Ä–ª–∞—Ä –∂–æ–∫ –±–æ–ª—Å–æ #}
            {# –ë—É–ª –∂–∞–∑—É—É–Ω—É –æ—Ä—Ç–æ–≥–æ –∫–æ—é—É “Ø—á“Ø–Ω CSS –∫–æ—à–∫–æ–Ω–±—É–∑ (—ç–≥–µ—Ä .category-grid-glovo p —ç—Ä–µ–∂–µ—Å–∏ –∏—à—Ç–µ—Å–µ) #}
            <p>–ë—É–ª –∫–∞—Ç–µ–≥–æ—Ä–∏—è–¥–∞ –∞–∑—ã—Ä—ã–Ω—á–∞ —Ç–æ–≤–∞—Ä–ª–∞—Ä –∂–æ–∫.</p>
        {% endif %}
    </section>

    {# –ë–∞—à–∫—ã –±–µ—Ç–∫–µ –∫–∞–π—Ç—É—É “Ø—á“Ø–Ω —à–∏–ª—Ç–µ–º–µ #}
    <div style="margin-top: 30px;">
        <a href="{% url 'store:home' %}">‚áê –ë–∞—à–∫—ã –±–µ—Ç–∫–µ –∫–∞–π—Ç—É—É</a>
    </div>

{% endblock %}