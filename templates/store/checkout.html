{# store/templates/store/checkout.html #}
{% extends "store/base.html" %}
{% load static %}
{% load i18n %}

{% block title %}{% trans "–ë—É–π—Ä—É—Ç–º–∞ –±–µ—Ä“Ø“Ø" %}{% endblock %}

{% block content %}
    <h1>{% trans "–ë—É–π—Ä—É—Ç–º–∞ –±–µ—Ä“Ø“Ø" %}</h1>

    {# –ë–∏–ª–¥–∏—Ä“Ø“Ø–ª”©—Ä–¥“Ø –∫”©—Ä—Å”©—Ç“Ø“Ø (–º–∏—Å., —Ñ–æ—Ä–º–∞–¥–∞ –∫–∞—Ç–∞ –±–æ–ª—Å–æ) #}
    {% if messages %}
        <ul class="messages" style="list-style: none; padding: 0; margin-bottom: 15px;">
            {% for message in messages %}
                <li{% if message.tags %} class="{{ message.tags }}" style="padding: 10px; border-radius: 5px; margin-bottom: 5px; color: white; background-color: {% if message.tags == 'success' %}#28a745{% elif message.tags == 'warning' %}#ffc107; color: black;{% elif message.tags == 'error' %}#dc3545{% else %}#17a2b8{% endif %};"{% endif %}>
                    {{ message }}
                </li>
            {% endfor %}
        </ul>
    {% endif %}

    {# –°–µ–±–µ—Ç—Ç–µ–≥–∏ —Ç–æ–≤–∞—Ä–ª–∞—Ä–¥—ã–Ω –∫—ã—Å–∫–∞—á–∞ —Ç–∏–∑–º–µ—Å–∏ #}
    <div class="order-summary" style="margin-bottom: 30px; padding: 15px; background-color: #f8f9fa; border: 1px solid #eee; border-radius: 8px;">
        <h3>{% trans "–°–∏–∑–¥–∏–Ω –±—É–π—Ä—É—Ç–º–∞“£—ã–∑" %}</h3>
        <ul style="list-style: none; padding: 0;">
            {% for item in cart %}
                <li style="display: flex; justify-content: space-between; padding: 5px 0; border-bottom: 1px dotted #ccc;">
                    <span>{{ item.quantity }} x {{ item.product.name }}</span>
                    <span>{{ item.total_price }} —Å–æ–º</span>
                </li>
            {% endfor %}
             {# --- –ñ–∞–ª–ø—ã —Å—É–º–º–∞ —Å–∞–±—ã (–¢–æ–ª—É–∫—Ç–∞–ª–¥—ã) --- #}
             <li style="display: flex; justify-content: space-between; padding: 10px 0; font-weight: bold; font-size: 1.1em; border-top: 1px solid #ccc; margin-top: 5px;">
                <span>{% trans "–ñ–∞–ª–ø—ã —Å—É–º–º–∞" %}:</span>
                <span>{{ cart.get_total_price }} —Å–æ–º</span>
             </li>
             {# ------------------------------------ #}
        </ul>
    </div>

    {# –ñ–µ—Ç–∫–∏—Ä“Ø“Ø –º–∞–∞–ª—ã–º–∞—Ç—ã–Ω –∫–∏—Ä–≥–∏–∑“Ø“Ø —Ñ–æ—Ä–º–∞—Å—ã #}
    <div class="checkout-form-container">
        <h2>{% trans "–ñ–µ—Ç–∫–∏—Ä“Ø“Ø –º–∞–∞–ª—ã–º–∞—Ç—ã–Ω —Ç–æ–ª—Ç—É—Ä—É“£—É–∑" %}</h2>
        <form action="{% url 'store:order_create' %}" method="post" class="order-form"> {# –£—à—É–ª —ç–ª–µ –±–∞—Ä–∞–∫–∫–∞ –∫–∞–π—Ä–∞ –∂”©–Ω”©—Ç”©—Ç #}
            {% csrf_token %}

            {# –§–æ—Ä–º–∞–Ω—ã–Ω —Ç–∞–ª–∞–∞–ª–∞—Ä—ã–Ω –±–∏—Ä-–±–∏—Ä–¥–µ–Ω –∫”©—Ä—Å”©—Ç“Ø“Ø #}
            {% for field in form %}
                <div style="margin-bottom: 15px;">
                    <label for="{{ field.id_for_label }}" style="display: block; margin-bottom: 5px; font-weight: bold;">
                        {{ field.label }}
                        {% if field.field.required %}<span style="color: red;">*</span>{% endif %} {# –ú–∏–ª–¥–µ—Ç—Ç“Ø“Ø —Ç–∞–ª–∞–∞ –±–µ–ª–≥–∏—Å–∏ #}
                    </label>
                    {# –¢–∞–ª–∞–∞–Ω—ã–Ω ”©–∑“Ø (input, textarea –∂.–±.) #}
                    {{ field }}
                    {# –≠–≥–µ—Ä —Ç–∞–ª–∞–∞–¥–∞ –∫–∞—Ç–∞ –±–æ–ª—Å–æ –∫”©—Ä—Å”©—Ç“Ø“Ø #}
                    {% if field.errors %}
                        <div class="errors" style="color: red; font-size: 0.9em; margin-top: 5px;">{{ field.errors }}</div>
                    {% endif %}
                     {# –≠–≥–µ—Ä –∂–∞—Ä–¥–∞–º—á—ã —Ç–µ–∫—Å—Ç –±–æ–ª—Å–æ –∫”©—Ä—Å”©—Ç“Ø“Ø #}
                     {% if field.help_text %}
                        <small class="help-text" style="color: grey; display: block; margin-top: 4px;">{{ field.help_text }}</small>
                    {% endif %}
                </div>
            {% endfor %}

            {# –ë—É–π—Ä—É—Ç–º–∞–Ω—ã –∂”©–Ω”©—Ç“Ø“Ø –±–∞—Å–∫—ã—á—ã #}
            <button type="submit" style="padding: 12px 25px; background-color: #007bff; color: white; border: none; border-radius: 5px; font-size: 1.1em; cursor: pointer; margin-top: 10px;">
                {% trans "–ë—É–π—Ä—É—Ç–º–∞–Ω—ã —Ç–∞—Å—Ç—ã–∫—Ç–æ–æ" %}
            </button>
        </form>
    </div>

{# ----- üëáüëáüëá –£–®–£–õ –°–ê–ü ”®–¢”® –ú–ê–ê–ù–ò–õ“Æ“Æ üëáüëáüëá ----- #}
{% endblock %}
{# ----- üëÜüëÜüëÜ {% block content %}'—Ç–∏ –∂–∞–±–∞—Ç üëÜüëÜüëÜ ----- #}